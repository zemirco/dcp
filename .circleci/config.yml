version: 2

jobs:

  build:

    docker:
      - image: circleci/golang:1.12

    steps:

      - checkout

      - run: go get golang.org/x/lint/golint
      - run: go get honnef.co/go/tools/cmd/staticcheck@2019.1.1

      - run: go vet ./...
      - run: golint -set_exit_status ./...
      - run: staticcheck ./...
      - run: go test -race -v ./...